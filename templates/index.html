{% extends "layout.html" %}

{% block title %}
    Home
{% endblock %}
{% block style %}
    <style>
    .grid {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        grid-template-rows: repeat(7, 1fr);
        gap: 10px;
        width: 400px;
        margin: 0 auto; /* Center align horizontally */
        justify-items: center; /* Center align grid items horizontally */
        align-items: center; /* Center align grid items vertically */
    }

    .box {
        width: 50px;
        height: 50px;
        border: 1px solid #000;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        font-weight: bold;
    }

    .box input {
        width: 100%;
        height: 100%;
        font-size: 20px;
        text-align: center;
        border: none;
        background: none;
        text-transform: uppercase; /* Convert text to uppercase */
        font-weight: bold;
    }

    .redbox {
        background-color: #ea433b;;
    }

    .bluebox {
        background-color: #f5b82e;
    }

    .greenbox {
        background-color: #2e944b;
    }

    .hidden {
        display: none;
    }

    </style>
{% endblock %}

{% block script %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var inputs = document.querySelectorAll('.grid .box input');
            inputs[0].focus();  // Set focus to the first input box

            for (var i = 0; i < inputs.length; i++) {
                inputs[i].addEventListener('input', function() {
                    var currentInput = this;
                    var maxLength = parseInt(currentInput.getAttribute('maxlength'));
                    var currentInputIndex = Array.prototype.indexOf.call(inputs, currentInput);

                    if (currentInput.value.length >= maxLength) {
                        if (currentInputIndex + 1 < inputs.length) {
                            inputs[currentInputIndex + 1].focus();
                        }
                    }
                });

                inputs[i].addEventListener('keydown', function(event) {
                    var currentInput = this;
                    var currentInputIndex = Array.prototype.indexOf.call(inputs, currentInput);

                    if (event.key === 'Backspace' && currentInput.value.length === 0) {
                        event.preventDefault();

                        if (currentInputIndex - 1 >= 0) {
                            inputs[currentInputIndex - 1].focus();
                            inputs[currentInputIndex - 1].value = '';
                        }
                    }
                });
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            var form = document.querySelector('form');
            form.addEventListener('keydown', function(event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                    form.submit();
                }
            });
        });
    </script>
{% endblock %}

{% block main %}
    <form action="/" method="POST" autocomplete="off">
        <div class="grid">
            {% for i in range(6) %}
                <div class="box {{ colors[i] }}">
                    <input type="text" name="guess[]" maxlength="1" value="{{ guess[i] }}">
                </div>
            {% endfor %}
        </div>
    </form>
{% endblock %}

